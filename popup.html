<!-- popup.html -->
<div id="announcementModal" class="modal">
  <div class="modal-content">
    <!-- El título comienza vacío o con el primero -->
    <h2 class="modal-title">🎤 Próximo Stream</h2>

    <!-- Carrusel Swiper -->
    <div class="swiper announcement-swiper">
      <div class="swiper-wrapper">
        
        <!-- Tarjeta 1: Próximo Stream -->
        <div class="swiper-slide announcement-card">
          <a href="https://www.youtube.com/@elbasureroedgar" target="_blank" class="image-link">
            <img src="Imagenes/the_best_crowd_ever.jpg" alt="Próximo Stream en YouTube" class="announcement-img">
          </a>
        </div>
        
        <!-- Tarjeta 2: Último Video -->
        <div class="swiper-slide announcement-card" id="latest-video-card">
          <a href="#" class="image-link" id="latest-video-link" target="_blank">
            <img src="" alt="Último Video" class="announcement-img" id="latest-video-img">
          </a>
        </div>
        
        <!-- Tarjeta 3: Programación -->
        <div class="swiper-slide announcement-card">
          <img src="Imagenes/horarios.jpg" alt="Horarios" class="announcement-img">
        </div>
      </div>
      
      <!-- Controles -->
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
    
    <!-- Checkbox -->
    <div class="checkbox-container">
      <input type="checkbox" id="noShowToday" name="noShowToday">
      <label for="noShowToday">No mostrar más por hoy</label>
    </div>
    
    <button class="btn btn-close" onclick="cerrarAnuncio()">Cerrar</button>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const modalTitle = document.querySelector('.modal-title');

  // Función para cambiar el texto con efecto suave
  function cambiarTitulo(nuevoTexto) {
    modalTitle.classList.add('fade-out');
    setTimeout(() => {
      modalTitle.textContent = nuevoTexto;
      modalTitle.classList.remove('fade-out');
      modalTitle.classList.add('fade-in');
      setTimeout(() => modalTitle.classList.remove('fade-in'), 300);
    }, 300);
  }

  // Inicializar Swiper
  const swiper = new Swiper('.announcement-swiper', {
    loop: true,
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    on: {
      slideChange: function () {
        const index = swiper.realIndex;
        switch (index) {
          case 0:
            cambiarTitulo('🎤 Próximo Stream');
            break;
          case 1:
            cambiarTitulo('🔥 Nuevo Video!!!');
            break;
          case 2:
            cambiarTitulo('🗓️ Horarios de la Semana');
            break;
        }
      }
    }
  });

  // Mostrar el título correcto al iniciar (por si el carrusel arranca en otra slide)
  cambiarTitulo('🎤 Próximo Stream');
});
</script>